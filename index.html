
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #111827; color: #f3f4f6; }
    .card { background: #1f2937; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .muted { color: #d1d5db; }
    .chip { background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.75rem; }
    .chart-img { max-width: 100%; height: auto; border-radius: 8px; }
    .border-card { border: 1px solid rgba(255,255,255,0.2); }
  </style>
</head>
<body class="p-6">
  <div class="max-w-6xl mx-auto">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">Portfolio Dashboard</h1>
      <p class="text-sm muted">Rendered from provided JSON — interactive, mobile-friendly view.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column: Summary + Allocation -->
      <section class="lg:col-span-1 space-y-4">
        <div class="card p-4">
          <h2 class="text-lg font-medium">Summary</h2>
          <p id="summaryText" class="mt-2 text-sm muted"></p>
          <div class="mt-4">
            <h3 class="text-sm font-medium">Allocation</h3>
            <div id="allocationList" class="mt-2 space-y-2 text-sm"></div>
            <div class="mt-3">
              <img id="allocationChart" class="chart-img" alt="Allocation Chart" />
            </div>
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Risk Analysis</h2>
          <div id="riskSummary" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="riskChart" class="chart-img" alt="Risk Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Education Tips</h2>
          <ul id="educationTips" class="mt-2 text-sm list-disc list-inside muted"></ul>
        </div>
      </section>

      <!-- Middle Column: Stocks + What-if + Mutual Funds -->
      <section class="lg:col-span-2 space-y-4">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-medium">Stocks Selected</h2>
            <span id="equityChip" class="chip">Equity Sleeve</span>
          </div>
          <div id="stocksGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">What-if Analysis</h2>
          <div id="whatIfText" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="whatIfChart" class="chart-img" alt="What-if Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Mutual Funds</h2>
          <div id="mfList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-sm muted text-center">
      Generated view — charts are loaded from QuickChart / TradingView links present in the JSON.
    </footer>
  </div>

  <!-- Embedded JSON data -->
  <script id="portfolio-data" type="application/json">
    {
  "allocation": {
    "equity_sleeves": {
      "stocks": "30% and $3600",
      "mutual_funds": "30% and $3600"
    },
    "diversifiers": {
      "crypto": "0% and $0",
      "gold": "10% and $1200",
      "bond_mutual_funds": "30% and $3600"
    }
  },
  "chart_url_allocation": "https://quickchart.io/chart?c={type:'pie',data:{labels:['Stocks','Mutual Funds','Gold','Bond Mutual Funds'],datasets:[{data:[30,30,10,30]}]}}",
  "stocks_selected": [
    {
      "stock": "JNJ",
      "current_price": 190.72,
      "week_52_high": "192.10",
      "week_52_low": "140.68",
      "pe": "20.27",
      "pb": "5.85",
      "eps": "9.35",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "2.63",
      "total_debt_to_equity": "0.51",
      "revenue_growth_yoy": "4.68",
      "net_profit_margin": "25.00",
      "current_ratio": "0.78",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/40deab2d-9d1f-4ecc-b886-4b45e214dc92.png",
      "buy_link": "https://public.com/stocks/jnj",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Johnson & Johnson is a healthcare giant known for its stability and consistent dividends. Its reasonable P/E and strong financial health make it a suitable choice for a moderate risk portfolio, offering both growth and income."
      }
    },
    {
      "stock": "GOOGL",
      "current_price": 236.57,
      "week_52_high": "256.00",
      "week_52_low": "140.53",
      "pe": "24.79",
      "pb": "7.89",
      "eps": "9.25",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.34",
      "total_debt_to_equity": "0.04",
      "revenue_growth_yoy": "13.13",
      "net_profit_margin": "31.12",
      "current_ratio": "1.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/1895657a-25f7-475f-9940-55a73c3a7c05.png",
      "buy_link": "https://public.com/stocks/googl",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Alphabet (Google) offers strong growth potential with excellent financials and a very low debt-to-equity ratio. Its consistent revenue growth and high net profit margin indicate a robust business model, fitting a moderate risk strategy with a growth component."
      }
    },
    {
      "stock": "PFE",
      "current_price": 24.78,
      "week_52_high": "30.43",
      "week_52_low": "20.92",
      "pe": "13.10",
      "pb": "1.59",
      "eps": "1.88",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "6.84",
      "total_debt_to_equity": "0.73",
      "revenue_growth_yoy": "13.54",
      "net_profit_margin": "16.85",
      "current_ratio": "0.92",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/78bbb0d6-0f1e-47be-a016-fd5d8105fa33.png",
      "buy_link": "https://public.com/stocks/pfe",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Pfizer presents a compelling value proposition with a low P/E and a high dividend yield, indicating a potentially undervalued stock. Its strong dividend and positive revenue growth make it attractive for income-focused investors within a moderate risk tolerance."
      }
    },
    {
      "stock": "BAC",
      "current_price": 48.65,
      "week_52_high": "52.88",
      "week_52_low": "33.07",
      "pe": "12.84",
      "pb": "1.20",
      "eps": "3.60",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "2.64",
      "total_debt_to_equity": "2.22",
      "revenue_growth_yoy": "99.37",
      "net_profit_margin": "30.16",
      "current_ratio": "N/A",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/82b54b0c-2442-4172-b9b9-1dbc151060f2.png",
      "buy_link": "https://public.com/stocks/bac",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Bank of America offers a strong financial sector exposure with impressive revenue growth and a low P/E ratio. Its solid dividend yield and profitability make it a valuable addition to a moderate risk portfolio, balancing growth with income."
      }
    }
  ],
  "mutual_funds_selected": [
    {
      "name": "Vanguard Total Stock Market Index Fund Admiral Shares",
      "category": "Total Market",
      "3_year_return": "13",
      "5_year_return": "15",
      "reason_for_investment": "VTSAX provides broad exposure to the entire U.S. stock market, offering diversification across market capitalizations. Its strong historical returns make it an excellent choice for long-term growth within a moderate risk profile."
    },
    {
      "name": "Vanguard Balanced Index Fund Admiral Shares",
      "category": "Balanced",
      "3_year_return": "7.8",
      "5_year_return": "8.2",
      "reason_for_investment": "VBIAX is a balanced fund that invests in a mix of stocks and bonds, providing diversification and potentially lower volatility than an all-equity fund. This makes it well-suited for a moderate risk investor seeking a blend of growth and stability."
    }
  ],
  "crypto_selected": [],
  "what_if_analysis": {
    "conservative_return": "5% return, total value $12600 (gain of $600)",
    "moderate_return": "8% return, total value $12960 (gain of $960)",
    "optimistic_return": "12% return, total value $13440 (gain of $1440)",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Conservative (5%)','Moderate (8%)','Optimistic (12%)'],datasets:[{label:'Projected Value',data:[12600,12960,13440],backgroundColor:['#4CAF50','#FFC107','#2196F3']}]}}"
  },
  "summary": "This portfolio allocates 60% to equity (stocks and mutual funds) and 40% to diversifiers like gold and fixed deposits/bonds, aligning with a moderate risk profile over a 5-year duration. The selected stocks offer a mix of stable dividend payers and growth-oriented companies with solid fundamentals. The mutual funds provide broad market and balanced exposure for further diversification and steady returns. This strategy aims for a balance between capital appreciation and risk mitigation.",
  "risk_analysis": {
    "mild_crash": "10% drop, potential loss of $1200, portfolio value $10800",
    "moderate_crash": "20% drop, potential loss of $2400, portfolio value $9600",
    "severe_crash": "30% drop, potential loss of $3600, portfolio value $8400",
    "summary": "This portfolio has a moderate risk profile. In a market downturn, the diversified nature, particularly the inclusion of gold and bond mutual funds, is expected to provide some cushion against significant losses compared to an all-equity portfolio. However, investors should be prepared for potential fluctuations in portfolio value during volatile periods.",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Mild Crash (10%)','Moderate Crash (20%)','Severe Crash (30%)'],datasets:[{label:'Portfolio Value After Crash',data:[10800,9600,8400],backgroundColor:['#FFEB3B','#FF9800','#F44336']}]}}"
  },
  "education_tips": {
    "diversification_importance": "Diversification is crucial for reducing risk. By spreading investments across different asset classes (stocks, mutual funds, gold, bonds), you can mitigate the impact of poor performance in any single asset category.",
    "long_term_perspective": "Investing with a long-term horizon (e.g., 5+ years) allows your investments to ride out short-term market volatility and benefit from compounding returns. Patience is key to successful investing.",
    "rebalancing_strategy": "Regularly rebalance your portfolio to maintain your desired asset allocation. This involves selling assets that have performed well and buying those that have underperformed to bring your portfolio back in line with your original strategy.",
    "understanding_risk": "All investments carry some level of risk. Understand your personal risk tolerance and align your portfolio with it. While higher returns often come with higher risk, diversification and a long-term view can help manage it."
  }
}
  </script>

  <script>
    const data = JSON.parse(document.getElementById('portfolio-data').textContent.trim());

    // Summary
    document.getElementById('summaryText').textContent = data.summary;

    // Allocation
    const alloc = data.allocation;
    const allocEl = document.getElementById('allocationList');
    allocEl.innerHTML = `
      <div><strong>Stocks:</strong> ${alloc.equity_sleeves.stocks}</div>
      <div><strong>Mutual Funds:</strong> ${alloc.equity_sleeves.mutual_funds}</div>
      <div><strong>Crypto:</strong> ${alloc.diversifiers.crypto || '0%'}</div>
      <div><strong>Bond MF:</strong> ${alloc.diversifiers.bond_mutual_funds}</div>
      <div><strong>Gold:</strong> ${alloc.diversifiers.gold}</div>
    `;

    // Allocation chart
    document.getElementById('allocationChart').src = data.chart_url_allocation;

    // Risk analysis
    document.getElementById('riskSummary').textContent = data.risk_analysis.summary;
    document.getElementById('riskChart').src = data.risk_analysis.quickchart_url;

    // Education tips
    const tipsEl = document.getElementById('educationTips');
    tipsEl.innerHTML = '';
    for (const tip of Object.values(data.education_tips)) {
      const li = document.createElement('li');
      li.textContent = tip;
      tipsEl.appendChild(li);
    }

    // Stocks grid
    const stocksGrid = document.getElementById('stocksGrid');
    stocksGrid.innerHTML = '';
    (data.stocks_selected || []).forEach(s => {
      const card = document.createElement('div');
      card.className = 'p-4 card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div>
            <h3 class="text-md font-semibold">${s.stock}</h3>
            <div class="muted text-sm">Price: ${s.current_price}</div>
            <div class="muted text-sm">PE: ${s.pe} • PB: ${s.pb}</div>
          </div>
          <div class="text-right">
            <a href="${s.buy_link || '#'}" target="_blank" class="text-sm underline">Buy</a>
          </div>
        </div>
        <p class="mt-2 text-sm muted">${s.analysis_summary?.['reason_for_selection(2-3 lines)'] || ''}</p>
        <div class="mt-3">
          <img src="${s.chart}" alt="${s.stock} chart" class="chart-img" />
        </div>
        <div class="mt-3 text-sm muted grid grid-cols-2 gap-2">
          <div><strong>52w High:</strong> ${s.week_52_high || 'N/A'}</div>
          <div><strong>52w Low:</strong> ${s.week_52_low || 'N/A'}</div>
          <div><strong>Dividend:</strong> ${s.dividend_yield || 'N/A'}</div>
          <div><strong>Debt/Equity:</strong> ${s.total_debt_to_equity || 'N/A'}</div>
        </div>
      `;
      stocksGrid.appendChild(card);
    });

    // What-if analysis
    const whatIf = data.what_if_analysis;
    document.getElementById('whatIfText').innerHTML = `
      <div class="text-sm muted"><strong>Conservative:</strong> ${whatIf.conservative_return || ''}</div>
      <div class="text-sm muted"><strong>Moderate:</strong> ${whatIf.moderate_return || ''}</div>
      <div class="text-sm muted"><strong>Optimistic:</strong> ${whatIf.optimistic_return || ''}</div>
    `;
    // Extract first chart URL from conservative_return for display
    const whatIfChartUrl = (whatIf.conservative_return?.match(/https?:\/\/[^\s]+/i) || [])[0];
    document.getElementById('whatIfChart').src = whatIfChartUrl || '';

    // Mutual funds
    const mfList = document.getElementById('mfList');
    mfList.innerHTML = '';
    (data.mutual_funds_selected || []).forEach(m => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="text-sm font-medium">${m.name}</div>
        <div class="muted text-xs">${m.category} • 3y: ${m['3_year_return']} • 5y: ${m['5_year_return']}</div>
        <div class="mt-2 text-sm muted">${m.reason_for_investment}</div>
      `;
      mfList.appendChild(el);
    });
  </script>
</body>
</html>
