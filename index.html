
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #111827; color: #f3f4f6; }
    .card { background: #1f2937; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .muted { color: #d1d5db; }
    .chip { background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.75rem; }
    .chart-img { max-width: 100%; height: auto; border-radius: 8px; }
    .border-card { border: 1px solid rgba(255,255,255,0.2); }
  </style>
</head>
<body class="p-6">
  <div class="max-w-6xl mx-auto">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">Portfolio Dashboard</h1>
      <p class="text-sm muted">Rendered from provided JSON — interactive, mobile-friendly view.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column: Summary + Allocation -->
      <section class="lg:col-span-1 space-y-4">
        <div class="card p-4">
          <h2 class="text-lg font-medium">Summary</h2>
          <p id="summaryText" class="mt-2 text-sm muted"></p>
          <div class="mt-4">
            <h3 class="text-sm font-medium">Allocation</h3>
            <div id="allocationList" class="mt-2 space-y-2 text-sm"></div>
            <div class="mt-3">
              <img id="allocationChart" class="chart-img" alt="Allocation Chart" />
            </div>
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Risk Analysis</h2>
          <div id="riskSummary" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="riskChart" class="chart-img" alt="Risk Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Education Tips</h2>
          <ul id="educationTips" class="mt-2 text-sm list-disc list-inside muted"></ul>
        </div>
      </section>

      <!-- Middle Column: Stocks + What-if + Mutual Funds -->
      <section class="lg:col-span-2 space-y-4">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-medium">Stocks Selected</h2>
            <span id="equityChip" class="chip">Equity Sleeve</span>
          </div>
          <div id="stocksGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">What-if Analysis</h2>
          <div id="whatIfText" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="whatIfChart" class="chart-img" alt="What-if Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Mutual Funds</h2>
          <div id="mfList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-sm muted text-center">
      Generated view — charts are loaded from QuickChart / TradingView links present in the JSON.
    </footer>
  </div>

  <!-- Embedded JSON data -->
  <script id="portfolio-data" type="application/json">
    {
  "allocation": {
    "equity_sleeves": {
      "stocks": "30% and $3600",
      "mutual_funds": "30% and $3600"
    },
    "diversifiers": {
      "gold": "10% and $1200",
      "bond_mutual_funds": "30% and $3600"
    }
  },
  "chart_url_allocation": "https://quickchart.io/chart?c={type:'pie',data:{labels:['Stocks','Mutual Funds','Gold','Bond Mutual Funds'],datasets:[{data:[30,30,10,30],backgroundColor:['#FF6384','#36A2EB','#FFCD56','#4BC0C0']}]}}",
  "stocks_selected": [
    {
      "stock": "GOOGL",
      "current_price": 236.57,
      "week_52_high": "256.00",
      "week_52_low": "140.53",
      "pe": "24.79",
      "pb": "7.89",
      "eps": "9.25",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.34",
      "total_debt_to_equity": "0.04",
      "revenue_growth_yoy": "13.13",
      "net_profit_margin": "31.12",
      "current_ratio": "1.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/72a436d1-1369-4e83-a63c-aa608fe49fad.png",
      "buy_link": "https://public.com/stocks/googl",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "GOOGL offers robust growth potential in the technology sector, supported by a healthy revenue growth and strong profitability. Its relatively lower debt and solid current ratio indicate financial stability, making it a good choice for moderate growth."
      }
    },
    {
      "stock": "JNJ",
      "current_price": 190.72,
      "week_52_high": "192.10",
      "week_52_low": "140.68",
      "pe": "20.27",
      "pb": "5.85",
      "eps": "9.35",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "2.63",
      "total_debt_to_equity": "0.51",
      "revenue_growth_yoy": "4.68",
      "net_profit_margin": "25.00",
      "current_ratio": "0.78",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/4403753d-b066-479b-8bc7-17be1f7aa8dd.png",
      "buy_link": "https://public.com/stocks/jnj",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "JNJ is a pharmaceutical and consumer health giant, providing stability and consistent dividends. Its strong EPS and net profit margin, coupled with a reasonable PE ratio and moderate debt, make it a reliable investment for long-term portfolio stability."
      }
    },
    {
      "stock": "KO",
      "current_price": 67.04,
      "week_52_high": "74.38",
      "week_52_low": "60.62",
      "pe": "23.68",
      "pb": "10.09",
      "eps": "2.82",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "2.93",
      "total_debt_to_equity": "1.79",
      "revenue_growth_yoy": "1.28",
      "net_profit_margin": "25.89",
      "current_ratio": "0.72",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/f159ea0e-e85a-435d-93b3-41046c967dc2.png",
      "buy_link": "https://public.com/stocks/ko",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "KO is a classic defensive stock, offering a solid dividend yield and consistent performance from its consumer staples business. Its high ROE and strong net profit margin highlight its profitability and brand strength, suitable for a stable component in a moderate-risk portfolio."
      }
    }
  ],
  "mutual_funds_selected": [
    {
      "name": "Vanguard Total Stock Market Index Fund Admiral Shares",
      "category": "Total Market Equity",
      "3_year_return": "13%",
      "5_year_return": "15%",
      "reason_for_investment": "VTSAX provides excellent diversification across the entire U.S. stock market (large, mid, and small-cap companies), offering strong historical returns suitable for long-term growth in a moderate-risk portfolio."
    },
    {
      "name": "Vanguard Total Bond Market Index Fund Admiral Shares",
      "category": "Bond",
      "3_year_return": "3.2%",
      "5_year_return": "3.5%",
      "reason_for_investment": "VBTLX offers broad exposure to the U.S. investment-grade bond market, providing stability, income, and diversification against equity market fluctuations, aligning well with a moderate risk profile."
    }
  ],
  "crypto_selected": [],
  "what_if_analysis": {
    "conservative_return": "5% return ($600) for a total value of $12,600. Chart: https://quickchart.io/chart?c={type:'bar',data:{labels:['Initial Investment','Conservative Return'],datasets:[{data:[12000,600],backgroundColor:['#36A2EB','#FFCD56']}]}}",
    "moderate_return": "8% return ($960) for a total value of $12,960. Chart: https://quickchart.io/chart?c={type:'bar',data:{labels:['Initial Investment','Moderate Return'],datasets:[{data:[12000,960],backgroundColor:['#36A2EB','#4BC0C0']}]}}",
    "optimistic_return": "12% return ($1440) for a total value of $13,440. Chart: https://quickchart.io/chart?c={type:'bar',data:{labels:['Initial Investment','Optimistic Return'],datasets:[{data:[12000,1440],backgroundColor:['#36A2EB','#9966FF']}]}}",
    "summary": "These projections illustrate potential returns based on different market conditions. Remember, past performance is not indicative of future results, and these are estimations for educational purposes."
  },
  "summary": "This portfolio allocates $12,000 for a lumpsum investment with a moderate risk tolerance. It balances growth through diversified equity (stocks and equity mutual funds) and stability through gold and bond mutual funds. The selected stocks offer a mix of growth and stability, while the mutual funds provide broad market exposure to both equities and bonds. This diversified approach aims to mitigate risk while still seeking appreciation over the long term.",
  "risk_analysis": {
    "mild_crash": "A 10% drop could result in a loss of $1,200, bringing the portfolio value to $10,800.",
    "moderate_crash": "A 20% drop could result in a loss of $2,400, bringing the portfolio value to $9,600.",
    "severe_crash": "A 30% drop could result in a loss of $3,600, bringing the portfolio value to $8,400.",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Initial','Mild Crash (10%)','Moderate Crash (20%)','Severe Crash (30%)'],datasets:[{label:'Value',data:[12000,10800,9600,8400],backgroundColor:['#4CAF50','#FFC107','#FF9800','#F44336']}]}}",
    "summary": "Understanding potential drawdowns is crucial for managing expectations and staying disciplined during market volatility. Diversification across different asset classes helps to cushion the impact of market crashes, though no portfolio is entirely immune to risk."
  },
  "education_tips": {
    "diversification_importance": "Diversification is key to managing risk by spreading investments across various asset classes, industries, and geographies. This approach helps to reduce the impact of poor performance from any single investment on your overall portfolio.",
    "long_term_perspective": "Investing with a long-term perspective allows you to ride out short-term market fluctuations and benefit from the power of compounding. Patience and consistency are vital for achieving financial goals.",
    "rebalancing_strategy": "Regularly rebalancing your portfolio involves adjusting your asset allocation back to your original targets. This strategy helps maintain your desired risk level and ensures you're not overly exposed to any one asset class.",
    "understanding_risk": "Every investment carries some level of risk. It's important to understand the risks associated with each asset in your portfolio and how they align with your personal risk tolerance. Never invest more than you can afford to lose."
  }
}
  </script>

  <script>
    const data = JSON.parse(document.getElementById('portfolio-data').textContent.trim());

    // Summary
    document.getElementById('summaryText').textContent = data.summary;

    // Allocation
    const alloc = data.allocation;
    const allocEl = document.getElementById('allocationList');
    allocEl.innerHTML = `
      <div><strong>Stocks:</strong> ${alloc.equity_sleeves.stocks}</div>
      <div><strong>Mutual Funds:</strong> ${alloc.equity_sleeves.mutual_funds}</div>
      <div><strong>Crypto:</strong> ${alloc.diversifiers.crypto || '0%'}</div>
      <div><strong>Bond MF:</strong> ${alloc.diversifiers.bond_mutual_funds}</div>
      <div><strong>Gold:</strong> ${alloc.diversifiers.gold}</div>
    `;

    // Allocation chart
    document.getElementById('allocationChart').src = data.chart_url_allocation;

    // Risk analysis
    document.getElementById('riskSummary').textContent = data.risk_analysis.summary;
    document.getElementById('riskChart').src = data.risk_analysis.quickchart_url;

    // Education tips
    const tipsEl = document.getElementById('educationTips');
    tipsEl.innerHTML = '';
    for (const tip of Object.values(data.education_tips)) {
      const li = document.createElement('li');
      li.textContent = tip;
      tipsEl.appendChild(li);
    }

    // Stocks grid
    const stocksGrid = document.getElementById('stocksGrid');
    stocksGrid.innerHTML = '';
    (data.stocks_selected || []).forEach(s => {
      const card = document.createElement('div');
      card.className = 'p-4 card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div>
            <h3 class="text-md font-semibold">${s.stock}</h3>
            <div class="muted text-sm">Price: ${s.current_price}</div>
            <div class="muted text-sm">PE: ${s.pe} • PB: ${s.pb}</div>
          </div>
          <div class="text-right">
            <a href="${s.buy_link || '#'}" target="_blank" class="text-sm underline">Buy</a>
          </div>
        </div>
        <p class="mt-2 text-sm muted">${s.analysis_summary?.['reason_for_selection(2-3 lines)'] || ''}</p>
        <div class="mt-3">
          <img src="${s.chart}" alt="${s.stock} chart" class="chart-img" />
        </div>
        <div class="mt-3 text-sm muted grid grid-cols-2 gap-2">
          <div><strong>52w High:</strong> ${s.week_52_high || 'N/A'}</div>
          <div><strong>52w Low:</strong> ${s.week_52_low || 'N/A'}</div>
          <div><strong>Dividend:</strong> ${s.dividend_yield || 'N/A'}</div>
          <div><strong>Debt/Equity:</strong> ${s.total_debt_to_equity || 'N/A'}</div>
        </div>
      `;
      stocksGrid.appendChild(card);
    });

    // What-if analysis
    const whatIf = data.what_if_analysis;
    document.getElementById('whatIfText').innerHTML = `
      <div class="text-sm muted"><strong>Conservative:</strong> ${whatIf.conservative_return || ''}</div>
      <div class="text-sm muted"><strong>Moderate:</strong> ${whatIf.moderate_return || ''}</div>
      <div class="text-sm muted"><strong>Optimistic:</strong> ${whatIf.optimistic_return || ''}</div>
    `;
    // Extract first chart URL from conservative_return for display
    const whatIfChartUrl = (whatIf.conservative_return?.match(/https?:\/\/[^\s]+/i) || [])[0];
    document.getElementById('whatIfChart').src = whatIfChartUrl || '';

    // Mutual funds
    const mfList = document.getElementById('mfList');
    mfList.innerHTML = '';
    (data.mutual_funds_selected || []).forEach(m => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="text-sm font-medium">${m.name}</div>
        <div class="muted text-xs">${m.category} • 3y: ${m['3_year_return']} • 5y: ${m['5_year_return']}</div>
        <div class="mt-2 text-sm muted">${m.reason_for_investment}</div>
      `;
      mfList.appendChild(el);
    });
  </script>
</body>
</html>
