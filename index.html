<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #111827; color: #f3f4f6; }
    .card { background: #1f2937; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .muted { color: #d1d5db; }
    .chip { background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.75rem; }
    .chart-img { max-width: 100%; height: auto; border-radius: 8px; }
    .border-card { border: 1px solid rgba(255,255,255,0.2); }
  </style>
</head>
<body class="p-6">
  <div class="max-w-6xl mx-auto">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">Portfolio Dashboard</h1>
      <p class="text-sm muted">Rendered from provided JSON — interactive, mobile-friendly view.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column: Summary + Allocation -->
      <section class="lg:col-span-1 space-y-4">
        <div class="card p-4">
          <h2 class="text-lg font-medium">Summary</h2>
          <p id="summaryText" class="mt-2 text-sm muted"></p>
          <div class="mt-4">
            <h3 class="text-sm font-medium">Allocation</h3>
            <div id="allocationList" class="mt-2 space-y-2 text-sm"></div>
            <div class="mt-3">
              <img id="allocationChart" class="chart-img" alt="Allocation Chart" />
            </div>
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Risk Analysis</h2>
          <div id="riskSummary" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="riskChart" class="chart-img" alt="Risk Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Education Tips</h2>
          <ul id="educationTips" class="mt-2 text-sm list-disc list-inside muted"></ul>
        </div>
      </section>

      <!-- Middle Column: Stocks + What-if + Mutual Funds + Diversifiers -->
      <section class="lg:col-span-2 space-y-4">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-medium">Stocks Selected</h2>
            <span id="equityChip" class="chip">Equity Sleeve</span>
          </div>
          <div id="stocksGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">What-if Analysis</h2>
          <div id="whatIfText" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="whatIfChart" class="chart-img" alt="What-if Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Mutual Funds</h2>
          <div id="mfList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Diversifiers</h2>
          <div id="diversifiersList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-sm muted text-center">
      Generated view — charts are loaded from QuickChart / TradingView links present in the JSON.
    </footer>
  </div>

  <!-- Embedded JSON data -->
  <script id="portfolio-data" type="application/json">
    {
  "allocation": {
    "equity_sleeves": {
      "stocks": "50% and 150000 INR",
      "mutual_funds": "30% and 90000 INR"
    },
    "diversifiers": {
      "crypto": "10% and 30000 INR",
      "gold": "10% and 30000 INR",
      "bond_mutual_funds": "0% and 0 INR"
    }
  },
  "chart_url_allocation": "https://quickchart.io/chart?c={type:'pie',data:{labels:['Stocks','Mutual Funds','Crypto','Gold'],datasets:[{data:[50,30,10,10]}]}}",
  "stocks_selected": [
    {
      "stock": "NVDA",
      "current_price": 183.16,
      "week_52_high": "195.62",
      "week_52_low": "86.62",
      "pe": "51.40",
      "pb": "44.45",
      "eps": "3.51",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.02",
      "total_debt_to_equity": "0.11",
      "revenue_growth_yoy": "71.55",
      "net_profit_margin": "52.41",
      "current_ratio": "3.67",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/a1fc4d77-01ae-45ca-bd77-a3f8763e6480.png",
      "buy_link": "https://public.com/stocks/nvda",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Nvidia is selected for its exceptional revenue growth (71.55%) and very strong net profit margin (52.41%), indicating high profitability and market demand. While its PE/PB ratios are high, they reflect strong future growth expectations, suitable for a high-risk appetite."
      }
    },
    {
      "stock": "META",
      "current_price": 705.3,
      "week_52_high": "796.25",
      "week_52_low": "479.80",
      "pe": "24.78",
      "pb": "9.08",
      "eps": "27.58",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.29",
      "total_debt_to_equity": "0.16",
      "revenue_growth_yoy": "19.38",
      "net_profit_margin": "39.99",
      "current_ratio": "2.83",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/196c2f42-b183-4236-8b81-ff4b67e39a9e.png",
      "buy_link": "https://public.com/stocks/meta",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Meta demonstrates strong revenue growth (19.38%) and excellent net profit margin (39.99%). Its robust profitability, low debt, and high liquidity make it a solid choice for growth, aligning with a high-risk profile."
      }
    },
    {
      "stock": "GOOGL",
      "current_price": 236.57,
      "week_52_high": "256.00",
      "week_52_low": "140.53",
      "pe": "24.79",
      "pb": "7.89",
      "eps": "9.25",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.34",
      "total_debt_to_equity": "0.04",
      "revenue_growth_yoy": "13.13",
      "net_profit_margin": "31.12",
      "current_ratio": "1.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/e1ae10ef-f989-4e77-b544-65144fcaba0e.png",
      "buy_link": "https://public.com/stocks/googl",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Google (Alphabet) is chosen for its consistent revenue growth (13.13%), exceptional net profit margin (31.12%), and extremely low debt. Its strong financial health and market position offer stable growth potential in a high-risk portfolio."
      }
    },
    {
      "stock": "MSFT",
      "current_price": 510.96,
      "week_52_high": "555.45",
      "week_52_low": "344.79",
      "pe": "37.30",
      "pb": "11.06",
      "eps": "13.64",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.63",
      "total_debt_to_equity": "0.26",
      "revenue_growth_yoy": "14.93",
      "net_profit_margin": "36.15",
      "current_ratio": "1.35",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/14dca211-5be2-40de-8010-50ea0de01bab.png",
      "buy_link": "https://public.com/stocks/msft",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Microsoft is included for its consistent strong revenue growth (14.93%) and excellent profitability (net profit margin 36.15%). Its low debt and strong liquidity, combined with its market leadership, make it a reliable performer within a growth-oriented strategy."
      }
    }
  ],
  "mutual_funds_selected": [
    {
      "name": "Vanguard Health Care Fund",
      "category": "Sectoral",
      "3_year_return": "15%",
      "5_year_return": "16.5%",
      "reason_for_investment": "Vanguard Health Care Fund is selected for its consistently high 3-year and 5-year returns, indicating strong performance within the healthcare sector. This fund provides excellent growth potential, aligning with a high-risk, high-return investment strategy."
    },
    {
      "name": "Vanguard Growth Index Fund",
      "category": "Growth",
      "3_year_return": "13.5%",
      "5_year_return": "14%",
      "reason_for_investment": "Vanguard Growth Index Fund is chosen for its focus on growth stocks and solid historical returns over 3 and 5 years. It offers broad exposure to companies with high growth potential, which is suitable for an investor with a high-risk appetite targeting significant returns."
    }
  ],
  "crypto_selected": [
    {
      "id": "bitcoin",
      "name": "Bitcoin",
      "symbol": "btc",
      "current_price": 10152411,
      "roi": "N/A",
      "buy_link": "https://www.coinbase.com/price/bitcoin",
      "summary": "Bitcoin is included as a high-risk, high-reward diversifier for its potential to generate significant returns, aligning with a high-risk appetite. Its decentralized nature and increasing institutional adoption make it an attractive, albeit volatile, asset."
    }
  ],
  "bond_mutual_funds": {
    "summary": "No allocation to bond mutual funds in this portfolio, as it targets a high-risk, high-return strategy. Bond funds are typically used for stability and income, which are not the primary goals here."
  },
  "Gold": {
    "summary": "Gold is included as a traditional safe-haven asset to provide a minor hedge against inflation and market volatility, offering some stability within this aggressive portfolio, as well as potential for appreciation."
  },
  "what_if_analysis": {
    "conservative_return": "5% return leading to a total value of 315000 INR",
    "moderate_return": "8% return leading to a total value of 324000 INR",
    "optimistic_return": "12% return leading to a total value of 336000 INR",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Conservative (5%)','Moderate (8%)','Optimistic (12%)'],datasets:[{label:'Projected Value',data:[315000,324000,336000],backgroundColor:['#4CAF50','#FFC107','#F44336']}]}}"
  },
  "summary": "This portfolio is designed for a high-risk appetite with a 3-year investment horizon and a target return of 22%. A substantial allocation is made to equity sleeves (80%), with a focus on high-growth and profitable technology stocks and high-performing sectoral and growth mutual funds. A portion is allocated to diversifiers including crypto for additional high-risk, high-reward potential, and gold for some portfolio stability. The selected stocks (NVDA, META, GOOGL, MSFT) show strong revenue growth, high profitability, and healthy financials. The mutual funds (VGENX, VGHAX) are chosen for their strong historical returns and growth-oriented nature.",
  "risk_analysis": {
    "mild_crash": "10% drop, leading to a portfolio value of 270000 INR (30000 INR lost)",
    "moderate_crash": "20% drop, leading to a portfolio value of 240000 INR (60000 INR lost)",
    "severe_crash": "30% drop, leading to a portfolio value of 210000 INR (90000 INR lost)",
    "summary": "This portfolio, with a high allocation to equities and crypto, is exposed to significant market risk. A mild crash could lead to a 10% loss (30,000 INR), a moderate crash to a 20% loss (60,000 INR), and a severe crash to a 30% loss (90,000 INR). Investors should be prepared for substantial fluctuations and potential drawdowns, aligning with a high-risk tolerance and a long-term horizon.",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Mild Crash (10%)','Moderate Crash (20%)','Severe Crash (30%)'],datasets:[{label:'Portfolio Value After Crash',data:[270000,240000,210000],backgroundColor:['#FFEB3B','#FF9800','#F44336']}]}}"
  },
  "education_tips": {
    "diversification_importance": "Diversification across different asset classes (stocks, mutual funds, crypto, gold) helps reduce overall portfolio risk by ensuring that poor performance in one asset class may be offset by better performance in another. While this portfolio is aggressive, the inclusion of gold and mutual funds provides some level of diversification beyond individual stocks.",
    "long_term_perspective": "Given the high-risk nature of this portfolio, a long-term investment horizon (e.g., 3+ years) is crucial. Market fluctuations are common in the short term, but historically, well-diversified growth portfolios tend to recover and generate significant returns over longer periods. Patience and adherence to the investment plan are key.",
    "rebalancing_strategy": "Regularly review and rebalance your portfolio (e.g., annually or semi-annually) to maintain your target asset allocation. If one asset class performs exceptionally well, its proportion in the portfolio might increase, exceeding the target. Rebalancing involves selling some of the outperforming assets and buying more of the underperforming ones to bring the portfolio back to its original desired allocation, managing risk and locking in gains.",
    "understanding_risk": "It's vital to fully understand and accept the inherent risks associated with this high-growth, high-risk portfolio. Investments in individual stocks and cryptocurrencies carry significant volatility. While the potential for high returns exists, there is also a risk of substantial capital loss. Only invest capital you can afford to lose and ensure your financial goals align with this risk profile."
  }
}
  </script>

  <script>
    const data = JSON.parse(document.getElementById('portfolio-data').textContent.trim());

    // Summary
    document.getElementById('summaryText').textContent = data.summary;

    // Allocation
    const alloc = data.allocation;
    const allocEl = document.getElementById('allocationList');
    allocEl.innerHTML = `
      <div><strong>Stocks:</strong> ${alloc.equity_sleeves.stocks}</div>
      <div><strong>Mutual Funds:</strong> ${alloc.equity_sleeves.mutual_funds}</div>
      <div><strong>Crypto:</strong> ${alloc.diversifiers.crypto || '0%'}</div>
      <div><strong>Bond MF:</strong> ${alloc.diversifiers.bond_mutual_funds}</div>
      <div><strong>Gold:</strong> ${alloc.diversifiers.gold}</div>
    `;

    // Allocation chart
    document.getElementById('allocationChart').src = data.chart_url_allocation;

    // Risk analysis
    document.getElementById('riskSummary').textContent = data.risk_analysis.summary;
    document.getElementById('riskChart').src = data.risk_analysis.quickchart_url;

    // What-if analysis
    const whatIf = data.what_if_analysis;
    document.getElementById('whatIfText').innerHTML = `
      <div class="text-sm muted"><strong>Conservative:</strong> ${whatIf.conservative_return || ''}</div>
      <div class="text-sm muted"><strong>Moderate:</strong> ${whatIf.moderate_return || ''}</div>
      <div class="text-sm muted"><strong>Optimistic:</strong> ${whatIf.optimistic_return || ''}</div>
    `;
    document.getElementById('whatIfChart').src = whatIf.quickchart_url || '';

    // Education tips
    const tipsEl = document.getElementById('educationTips');
    tipsEl.innerHTML = '';
    for (const tip of Object.values(data.education_tips)) {
      const li = document.createElement('li');
      li.textContent = tip;
      tipsEl.appendChild(li);
    }

    // Stocks grid
    const stocksGrid = document.getElementById('stocksGrid');
    stocksGrid.innerHTML = '';
    (data.stocks_selected || []).forEach(s => {
      const card = document.createElement('div');
      card.className = 'p-4 card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div>
            <h3 class="text-md font-semibold">${s.stock}</h3>
            <div class="muted text-sm">Price: ${s.current_price}</div>
            <div class="muted text-sm">PE: ${s.pe} • PB: ${s.pb}</div>
          </div>
          <div class="text-right">
            <a href="${s.buy_link || '#'}" target="_blank" class="text-sm underline">Buy</a>
          </div>
        </div>
        <p class="mt-2 text-sm muted">${s.analysis_summary?.['reason_for_selection(2-3 lines)'] || ''}</p>
        <div class="mt-3">
          <img src="${s.chart}" alt="${s.stock} chart" class="chart-img" />
        </div>
        <div class="mt-3 text-sm muted grid grid-cols-2 gap-2">
          <div><strong>52w High:</strong> ${s.week_52_high || 'N/A'}</div>
          <div><strong>52w Low:</strong> ${s.week_52_low || 'N/A'}</div>
          <div><strong>Dividend:</strong> ${s.dividend_yield || 'N/A'}</div>
          <div><strong>Debt/Equity:</strong> ${s.total_debt_to_equity || 'N/A'}</div>
        </div>
      `;
      stocksGrid.appendChild(card);
    });

    // Mutual funds
    const mfList = document.getElementById('mfList');
    mfList.innerHTML = '';
    (data.mutual_funds_selected || []).forEach(m => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="text-sm font-medium">${m.name}</div>
        <div class="muted text-xs">${m.category} • 3y: ${m['3_year_return']} • 5y: ${m['5_year_return']}</div>
        <div class="mt-2 text-sm muted">${m.reason_for_investment}</div>
      `;
      mfList.appendChild(el);
    });

    // Diversifiers (Crypto, Gold, Bond MF)
    const diversifiersEl = document.getElementById('diversifiersList');
    diversifiersEl.innerHTML = '';

    // --- Crypto ---
    (data.crypto_selected || []).forEach(c => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="flex justify-between items-center">
          <div>
            <div class="text-sm font-medium">${c.name} (${c.symbol.toUpperCase()})</div>
            <div class="muted text-xs">Price: ${c.current_price.toLocaleString()} USD</div>
          </div>
          <a href="${c.buy_link}" target="_blank" class="text-xs underline">Buy</a>
        </div>
        <div class="mt-2 text-sm muted">ROI: ${c.roi || 'N/A'}</div>
      `;
      diversifiersEl.appendChild(el);
    });

    // --- Gold ---
    if (data.allocation.diversifiers.gold) {
      const goldEl = document.createElement('div');
      goldEl.className = 'p-3 border-card rounded';
      goldEl.innerHTML = `
        <div class="text-sm font-medium">Gold</div>
        <div class="muted text-xs">Allocation: ${data.allocation.diversifiers.gold}</div>
      `;
      diversifiersEl.appendChild(goldEl);
    }

    // --- Bond Mutual Funds ---
    if (data.allocation.diversifiers.bond_mutual_funds) {
      const bondEl = document.createElement('div');
      bondEl.className = 'p-3 border-card rounded';
      bondEl.innerHTML = `
        <div class="text-sm font-medium">Bond Mutual Funds</div>
        <div class="muted text-xs">Allocation: ${data.allocation.diversifiers.bond_mutual_funds}</div>
      `;
      diversifiersEl.appendChild(bondEl);
    }
  </script>
</body>
</html>
