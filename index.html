<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #111827; color: #f3f4f6; }
    .card { background: #1f2937; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .muted { color: #d1d5db; }
    .chip { background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.75rem; }
    .chart-img { max-width: 100%; height: auto; border-radius: 8px; }
    .border-card { border: 1px solid rgba(255,255,255,0.2); }
  </style>
</head>
<body class="p-6">
  <div class="max-w-6xl mx-auto">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">Portfolio Dashboard</h1>
      <p class="text-sm muted">Rendered from provided JSON — interactive, mobile-friendly view.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column: Summary + Allocation -->
      <section class="lg:col-span-1 space-y-4">
        <div class="card p-4">
          <h2 class="text-lg font-medium">Summary</h2>
          <p id="summaryText" class="mt-2 text-sm muted"></p>
          <div class="mt-4">
            <h3 class="text-sm font-medium">Allocation</h3>
            <div id="allocationList" class="mt-2 space-y-2 text-sm"></div>
            <div class="mt-3">
              <img id="allocationChart" class="chart-img" alt="Allocation Chart" />
            </div>
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Risk Analysis</h2>
          <div id="riskSummary" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="riskChart" class="chart-img" alt="Risk Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Education Tips</h2>
          <ul id="educationTips" class="mt-2 text-sm list-disc list-inside muted"></ul>
        </div>
      </section>

      <!-- Middle Column: Stocks + What-if + Mutual Funds + Diversifiers -->
      <section class="lg:col-span-2 space-y-4">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-medium">Stocks Selected</h2>
            <span id="equityChip" class="chip">Equity Sleeve</span>
          </div>
          <div id="stocksGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">What-if Analysis</h2>
          <div id="whatIfText" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="whatIfChart" class="chart-img" alt="What-if Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Mutual Funds</h2>
          <div id="mfList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Diversifiers</h2>
          <div id="diversifiersList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-sm muted text-center">
      Generated view — charts are loaded from QuickChart / TradingView links present in the JSON.
    </footer>
  </div>

  <!-- Embedded JSON data -->
  <script id="portfolio-data" type="application/json">
    {
  "allocation": {
    "equity_sleeves": {
      "stocks": "50% and 150000 INR",
      "mutual_funds": "30% and 90000 INR"
    },
    "diversifiers": {
      "crypto": "10% and 30000 INR",
      "gold": "5% and 15000 INR",
      "bond_mutual_funds": "5% and 15000 INR"
    }
  },
  "chart_url_allocation": "https://quickchart.io/chart?c={type:'pie',data:{labels:['Stocks','Mutual Funds','Crypto','Gold','Bond Mutual Funds'],datasets:[{data:[50,30,10,5,5]}]}}",
  "stocks_selected": [
    {
      "stock": "NVDA",
      "current_price": 183.16,
      "week_52_high": "195.62",
      "week_52_low": "86.62",
      "pe": "51.40",
      "pb": "44.45",
      "eps": "3.51",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.02",
      "total_debt_to_equity": "0.11",
      "revenue_growth_yoy": "71.55",
      "net_profit_margin": "52.41",
      "current_ratio": "3.67",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/eb7a1700-921d-4f14-b609-aecdf6e510e3.png",
      "buy_link": "https://public.com/stocks/NVDA",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Nvidia shows exceptional revenue growth and profit margins, indicating strong market demand for its chips. Its high ROE and ROA suggest efficient use of shareholder equity and assets, making it a strong pick for high-risk, high-return investors."
      }
    },
    {
      "stock": "MSFT",
      "current_price": 510.96,
      "week_52_high": "555.45",
      "week_52_low": "344.79",
      "pe": "37.30",
      "pb": "11.06",
      "eps": "13.64",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.63",
      "total_debt_to_equity": "0.26",
      "revenue_growth_yoy": "14.93",
      "net_profit_margin": "36.15",
      "current_ratio": "1.35",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/3b0d0cd0-1833-465c-b87c-1aa499b6544d.png",
      "buy_link": "https://public.com/stocks/MSFT",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Microsoft demonstrates consistent strong performance across its diverse business segments, with solid revenue growth and excellent net profit margins. Its healthy EPS and low debt-to-equity ratio provide a stable yet growth-oriented investment."
      }
    },
    {
      "stock": "GOOGL",
      "current_price": 236.57,
      "week_52_high": "256.00",
      "week_52_low": "140.53",
      "pe": "24.79",
      "pb": "7.89",
      "eps": "9.25",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.34",
      "total_debt_to_equity": "0.04",
      "revenue_growth_yoy": "13.13",
      "net_profit_margin": "31.12",
      "current_ratio": "1.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/06bd99c7-769a-4836-abd2-a19a11c76e92.png",
      "buy_link": "https://public.com/stocks/GOOGL",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Alphabet (Google) benefits from its dominance in search and cloud services, reflected in its robust revenue growth and high profit margins. Its very low debt and strong EPS indicate a financially sound company with significant future potential."
      }
    },
    {
      "stock": "AMZN",
      "current_price": 216.37,
      "week_52_high": "242.52",
      "week_52_low": "161.38",
      "pe": "32.67",
      "pb": "6.91",
      "eps": "6.55",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "NULL",
      "total_debt_to_equity": "0.27",
      "revenue_growth_yoy": "10.87",
      "net_profit_margin": "10.54",
      "current_ratio": "0.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/7f744aca-da1f-4fd7-9a08-abe38e9d76bc.png",
      "buy_link": "https://public.com/stocks/AMZN",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Amazon's continued expansion in e-commerce and cloud computing (AWS) drives its revenue growth. Its reasonable PE and PB ratios, combined with positive EPS and manageable debt, offer a strong long-term growth opportunity despite slightly lower profit margins compared to other tech giants."
      }
    }
  ],
  "mutual_funds_selected": [
    {
      "name": "Vanguard Total Stock Market Index Fund Admiral Shares",
      "category": "Total Market",
      "3_year_return": "13%",
      "5_year_return": "15%",
      "reason_for_investment": "VTSAX provides broad market exposure across all US equity sizes, offering diversified growth potential. Its consistent strong returns over 3 and 5 years make it a solid choice for long-term growth and capital appreciation."
    },
    {
      "name": "Vanguard Health Care Fund",
      "category": "Sectoral",
      "3_year_return": "15%",
      "5_year_return": "16.5%",
      "reason_for_investment": "VGENX focuses on the healthcare sector, which often exhibits resilience and innovation-driven growth. Its high 3-year and 5-year returns demonstrate strong performance in a dynamic industry, aligning with a high-risk, high-return strategy."
    },
    {
      "name": "Vanguard Growth Index Fund",
      "category": "Growth",
      "3_year_return": "13.5%",
      "5_year_return": "14%",
      "reason_for_investment": "VGHAX invests in companies with strong growth characteristics, aiming for capital appreciation. Its solid historical returns indicate its potential to outperform in a rising market, fitting a high-risk appetite."
    }
  ],
  "crypto_selected": [
    {
      "id": "bitcoin",
      "name": "Bitcoin",
      "symbol": "btc",
      "current_price": 10161637,
      "roi": "N/A",
      "buy_link": "https://www.coinbase.com/price/bitcoin",
      "summary": "Bitcoin, as the pioneering cryptocurrency, offers significant growth potential and acts as a store of value in the digital economy, appealing to high-risk investors seeking aggressive growth. (50% of crypto allocation)"
    },
    {
      "id": "ethereum",
      "name": "Ethereum",
      "symbol": "eth",
      "current_price": 364185,
      "roi": "4688.82%",
      "buy_link": "https://www.coinbase.com/price/ethereum",
      "summary": "Ethereum powers a vast ecosystem of decentralized applications and smart contracts, offering robust innovation and potential for high returns. Its high historical ROI reflects its strong ecosystem growth. (50% of crypto allocation)"
    }
  ],
  "bond_mutual_funds": {
    "summary": "This allocation provides stability and acts as a hedge against equity market volatility. Debt/FDs offer predictable, albeit lower, returns and preserve capital, balancing the high-risk equity and crypto components."
  },
  "Gold": {
    "summary": "Gold serves as a traditional safe-haven asset, providing a hedge against inflation and economic uncertainty. It diversifies the portfolio and can preserve value during market downturns, offering stability."
  },
  "what_if_analysis": {
    "conservative_return": "5% return leading to a total value of 315000 INR",
    "moderate_return": "8% return leading to a total value of 324000 INR",
    "optimistic_return": "12% return leading to a total value of 336000 INR",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Conservative (5%)','Moderate (8%)','Optimistic (12%)'],datasets:[{label:'Projected Value',data:[315000,324000,336000]}]}}"
  },
  "summary": "This portfolio allocates 80% to equity (stocks and mutual funds) and 20% to diversifiers (crypto, gold, debt/FD) to achieve a 22% target return over 3 years with a high-risk appetite. The selected stocks are leading technology companies with strong growth prospects, while the mutual funds offer a mix of broad market and high-growth sectoral exposure. Diversifiers include high-risk crypto for aggressive growth, gold for hedging, and debt/FD for minimal stability.",
  "risk_analysis": {
    "mild_crash": "10% drop, amounting to 30000 INR lost. Portfolio value: 270000 INR",
    "moderate_crash": "20% drop, amounting to 60000 INR lost. Portfolio value: 240000 INR",
    "severe_crash": "30% drop, amounting to 90000 INR lost. Portfolio value: 210000 INR",
    "summary": "Given the high allocation to equities and crypto, this portfolio carries significant market risk. While aiming for high returns, it is susceptible to substantial drawdowns during market corrections. Diversification into gold and debt/FDs partially mitigates this, but investors should be prepared for volatility.",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Mild Crash (10%)','Moderate Crash (20%)','Severe Crash (30%)'],datasets:[{label:'Portfolio Value After Crash',data:[270000,240000,210000]}]}}"
  },
  "education_tips": {
    "diversification_importance": "Diversification across different asset classes (stocks, mutual funds, crypto, gold, debt) helps reduce overall portfolio risk. When one asset performs poorly, others may perform well, balancing returns.",
    "long_term_perspective": "Investing with a long-term horizon (3+ years) allows your investments to ride out short-term market fluctuations and benefit from compounding, especially in high-growth assets.",
    "rebalancing_strategy": "Regularly review and rebalance your portfolio (e.g., annually) to maintain your desired asset allocation. This involves selling assets that have performed well and buying those that have underperformed to keep risk in check.",
    "understanding_risk": "It's crucial to understand that higher potential returns often come with higher risk. Assess your personal risk tolerance and ensure your portfolio aligns with how much volatility you are comfortable with."
  }
}
  </script>

  <script>
    const data = JSON.parse(document.getElementById('portfolio-data').textContent.trim());

    // Summary
    document.getElementById('summaryText').textContent = data.summary;

    // Allocation
    const alloc = data.allocation;
    const allocEl = document.getElementById('allocationList');
    allocEl.innerHTML = `
      <div><strong>Stocks:</strong> ${alloc.equity_sleeves.stocks}</div>
      <div><strong>Mutual Funds:</strong> ${alloc.equity_sleeves.mutual_funds}</div>
      <div><strong>Crypto:</strong> ${alloc.diversifiers.crypto || '0%'}</div>
      <div><strong>Bond MF:</strong> ${alloc.diversifiers.bond_mutual_funds}</div>
      <div><strong>Gold:</strong> ${alloc.diversifiers.gold}</div>
    `;

    // Allocation chart
    document.getElementById('allocationChart').src = data.chart_url_allocation;

    // Risk analysis
    document.getElementById('riskSummary').textContent = data.risk_analysis.summary;
    document.getElementById('riskChart').src = data.risk_analysis.quickchart_url;

    // What-if analysis
    const whatIf = data.what_if_analysis;
    document.getElementById('whatIfText').innerHTML = `
      <div class="text-sm muted"><strong>Conservative:</strong> ${whatIf.conservative_return || ''}</div>
      <div class="text-sm muted"><strong>Moderate:</strong> ${whatIf.moderate_return || ''}</div>
      <div class="text-sm muted"><strong>Optimistic:</strong> ${whatIf.optimistic_return || ''}</div>
    `;
    document.getElementById('whatIfChart').src = whatIf.quickchart_url || '';

    // Education tips
    const tipsEl = document.getElementById('educationTips');
    tipsEl.innerHTML = '';
    for (const tip of Object.values(data.education_tips)) {
      const li = document.createElement('li');
      li.textContent = tip;
      tipsEl.appendChild(li);
    }

    // Stocks grid
    const stocksGrid = document.getElementById('stocksGrid');
    stocksGrid.innerHTML = '';
    (data.stocks_selected || []).forEach(s => {
      const card = document.createElement('div');
      card.className = 'p-4 card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div>
            <h3 class="text-md font-semibold">${s.stock}</h3>
            <div class="muted text-sm">Price: ${s.current_price}</div>
            <div class="muted text-sm">PE: ${s.pe} • PB: ${s.pb}</div>
          </div>
          <div class="text-right">
            <a href="${s.buy_link || '#'}" target="_blank" class="text-sm underline">Buy</a>
          </div>
        </div>
        <p class="mt-2 text-sm muted">${s.analysis_summary?.['reason_for_selection(2-3 lines)'] || ''}</p>
        <div class="mt-3">
          <img src="${s.chart}" alt="${s.stock} chart" class="chart-img" />
        </div>
        <div class="mt-3 text-sm muted grid grid-cols-2 gap-2">
          <div><strong>52w High:</strong> ${s.week_52_high || 'N/A'}</div>
          <div><strong>52w Low:</strong> ${s.week_52_low || 'N/A'}</div>
          <div><strong>Dividend:</strong> ${s.dividend_yield || 'N/A'}</div>
          <div><strong>Debt/Equity:</strong> ${s.total_debt_to_equity || 'N/A'}</div>
        </div>
      `;
      stocksGrid.appendChild(card);
    });

    // Mutual funds
    const mfList = document.getElementById('mfList');
    mfList.innerHTML = '';
    (data.mutual_funds_selected || []).forEach(m => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="text-sm font-medium">${m.name}</div>
        <div class="muted text-xs">${m.category} • 3y: ${m['3_year_return']} • 5y: ${m['5_year_return']}</div>
        <div class="mt-2 text-sm muted">${m.reason_for_investment}</div>
      `;
      mfList.appendChild(el);
    });

    // Diversifiers (Crypto, Gold, Bond MF)
    const diversifiersEl = document.getElementById('diversifiersList');
    diversifiersEl.innerHTML = '';

    // --- Crypto ---
    (data.crypto_selected || []).forEach(c => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="flex justify-between items-center">
          <div>
            <div class="text-sm font-medium">${c.name} (${c.symbol.toUpperCase()})</div>
            <div class="muted text-xs">Price: ${c.current_price.toLocaleString()} USD</div>
          </div>
          <a href="${c.buy_link}" target="_blank" class="text-xs underline">Buy</a>
        </div>
        <div class="mt-2 text-sm muted">ROI: ${c.roi || 'N/A'}</div>
      `;
      diversifiersEl.appendChild(el);
    });

    // --- Gold ---
    if (data.allocation.diversifiers.gold) {
      const goldEl = document.createElement('div');
      goldEl.className = 'p-3 border-card rounded';
      goldEl.innerHTML = `
        <div class="text-sm font-medium">Gold</div>
        <div class="muted text-xs">Allocation: ${data.allocation.diversifiers.gold}</div>
      `;
      diversifiersEl.appendChild(goldEl);
    }

    // --- Bond Mutual Funds ---
    if (data.allocation.diversifiers.bond_mutual_funds) {
      const bondEl = document.createElement('div');
      bondEl.className = 'p-3 border-card rounded';
      bondEl.innerHTML = `
        <div class="text-sm font-medium">Bond Mutual Funds</div>
        <div class="muted text-xs">Allocation: ${data.allocation.diversifiers.bond_mutual_funds}</div>
      `;
      diversifiersEl.appendChild(bondEl);
    }
  </script>
</body>
</html>
