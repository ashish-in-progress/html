
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #111827; color: #f3f4f6; }
    .card { background: #1f2937; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
    .muted { color: #d1d5db; }
    .chip { background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 999px; font-size: 0.75rem; }
    .chart-img { max-width: 100%; height: auto; border-radius: 8px; }
    .border-card { border: 1px solid rgba(255,255,255,0.2); }
  </style>
</head>
<body class="p-6">
  <div class="max-w-6xl mx-auto">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">Portfolio Dashboard</h1>
      <p class="text-sm muted">Rendered from provided JSON — interactive, mobile-friendly view.</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Left Column: Summary + Allocation -->
      <section class="lg:col-span-1 space-y-4">
        <div class="card p-4">
          <h2 class="text-lg font-medium">Summary</h2>
          <p id="summaryText" class="mt-2 text-sm muted"></p>
          <div class="mt-4">
            <h3 class="text-sm font-medium">Allocation</h3>
            <div id="allocationList" class="mt-2 space-y-2 text-sm"></div>
            <div class="mt-3">
              <img id="allocationChart" class="chart-img" alt="Allocation Chart" />
            </div>
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Risk Analysis</h2>
          <div id="riskSummary" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="riskChart" class="chart-img" alt="Risk Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Education Tips</h2>
          <ul id="educationTips" class="mt-2 text-sm list-disc list-inside muted"></ul>
        </div>
      </section>

      <!-- Middle Column: Stocks + What-if + Mutual Funds -->
      <section class="lg:col-span-2 space-y-4">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-medium">Stocks Selected</h2>
            <span id="equityChip" class="chip">Equity Sleeve</span>
          </div>
          <div id="stocksGrid" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">What-if Analysis</h2>
          <div id="whatIfText" class="mt-2 text-sm muted"></div>
          <div class="mt-3">
            <img id="whatIfChart" class="chart-img" alt="What-if Chart" />
          </div>
        </div>

        <div class="card p-4">
          <h2 class="text-lg font-medium">Mutual Funds</h2>
          <div id="mfList" class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3"></div>
        </div>
      </section>
    </main>

    <footer class="mt-6 text-sm muted text-center">
      Generated view — charts are loaded from QuickChart / TradingView links present in the JSON.
    </footer>
  </div>

  <!-- Embedded JSON data -->
  <script id="portfolio-data" type="application/json">
    {
  "allocation": {
    "equity_sleeves": {
      "stocks": "60% and 518,400 USD",
      "mutual_funds": "40% and 345,600 USD"
    },
    "diversifiers": {
      "crypto": "15% and 162,000 USD",
      "gold": "5% and 54,000 USD",
      "bond_mutual_funds": "0% and 0 USD"
    }
  },
  "chart_url_allocation": "https://quickchart.io/chart?c={type:'pie',data:{labels:['Stocks','Mutual Funds','Crypto','Gold','Bond Mutual Funds'],datasets:[{data:[60,40,15,5,0]}]}}",
  "stocks_selected": [
    {
      "stock": "NVDA",
      "current_price": 183.16,
      "week_52_high": "195.62",
      "week_52_low": "86.62",
      "pe": "51.40",
      "pb": "44.45",
      "eps": "3.51",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.02",
      "total_debt_to_equity": "0.11",
      "revenue_growth_yoy": "71.55",
      "net_profit_margin": "52.41",
      "current_ratio": "3.67",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/73cb3be1-7484-480c-a49d-debcf0bb9a1f.png",
      "buy_link": "https://public.com/stocks/NVDA",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Nvidia is selected for its exceptional revenue growth (71.55% YoY) and strong profitability, indicating robust market demand for its technology. While its PE is high, this reflects its leading position in high-growth sectors like AI and gaming, offering significant potential for future appreciation."
      }
    },
    {
      "stock": "MSFT",
      "current_price": 510.96,
      "week_52_high": "555.45",
      "week_52_low": "344.79",
      "pe": "37.30",
      "pb": "11.06",
      "eps": "13.64",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.63",
      "total_debt_to_equity": "0.26",
      "revenue_growth_yoy": "14.93",
      "net_profit_margin": "36.15",
      "current_ratio": "1.35",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/52c23a0f-0371-4af6-a567-336115dc0dc8.png",
      "buy_link": "https://public.com/stocks/MSFT",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Microsoft is a tech giant with consistent strong revenue growth and outstanding net profit margins, alongside a healthy balance sheet. Its continuous innovation in cloud computing and enterprise software suggests continued market dominance and steady long-term growth."
      }
    },
    {
      "stock": "GOOGL",
      "current_price": 236.57,
      "week_52_high": "256.00",
      "week_52_low": "140.53",
      "pe": "24.79",
      "pb": "7.89",
      "eps": "9.25",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.34",
      "total_debt_to_equity": "0.04",
      "revenue_growth_yoy": "13.13",
      "net_profit_margin": "31.12",
      "current_ratio": "1.84",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/4f3ad2f3-c736-4da9-8a4e-0a613bdbae0c.png",
      "buy_link": "https://public.com/stocks/GOOGL",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Alphabet (Google) offers excellent revenue growth and strong profitability with a very low debt-to-equity ratio, indicating financial strength. Its diverse portfolio across search, advertising, cloud, and AI positions it for sustained growth, making it a solid choice for a high-risk portfolio."
      }
    },
    {
      "stock": "META",
      "current_price": 705.3,
      "week_52_high": "796.25",
      "week_52_low": "479.80",
      "pe": "24.78",
      "pb": "9.08",
      "eps": "27.58",
      "roe": "N/A",
      "roa": "N/A",
      "dividend_yield": "0.29",
      "total_debt_to_equity": "0.16",
      "revenue_growth_yoy": "19.38",
      "net_profit_margin": "39.99",
      "current_ratio": "2.83",
      "chart": "https://r2.chart-img.com/20251027/tradingview/advanced-chart/51a5f42b-bcae-47ed-a5ca-6c6061be15a9.png",
      "buy_link": "https://public.com/stocks/META",
      "analysis_summary": {
        "reason_for_selection(2-3 lines)": "Meta Platforms is chosen for its significant revenue growth and high net profit margin, demonstrating strong operational efficiency. Its leadership in social media and aggressive investment in the metaverse offer substantial, albeit riskier, upside potential over the investment horizon."
      }
    }
  ],
  "mutual_funds_selected": [],
  "crypto_selected": [
    {
      "id": "bitcoin",
      "name": "Bitcoin",
      "symbol": "btc",
      "current_price": 10155670,
      "roi": "N/A",
      "buy_link": "https://www.coinbase.com/how-to-buy/bitcoin"
    },
    {
      "id": "ethereum",
      "name": "Ethereum",
      "symbol": "eth",
      "current_price": 365280,
      "roi": "4708.13%",
      "buy_link": "https://www.coinbase.com/how-to-buy/ethereum"
    }
  ],
  "what_if_analysis": {
    "conservative_return": "5% return, total value 1,134,000 USD",
    "moderate_return": "8% return, total value 1,166,400 USD",
    "optimistic_return": "12% return, total value 1,210,000 USD",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Conservative (5%)','Moderate (8%)','Optimistic (12%)'],datasets:[{label:'Projected Value',data:[1134000,1166400,1210000]}]}}"
  },
  "summary": "This portfolio emphasizes high-growth potential through a significant allocation to equity sleeves, particularly in technology stocks with strong fundamentals and demonstrated growth. The diversifiers, including cryptocurrency, cater to your high-risk appetite for potentially higher returns, while gold offers a limited hedge. The 3-year investment duration aligns with capturing growth in these dynamic assets.",
  "risk_analysis": {
    "mild_crash": "10% drop, 108,000 USD lost, remaining value 972,000 USD",
    "moderate_crash": "20% drop, 216,000 USD lost, remaining value 864,000 USD",
    "severe_crash": "30% drop, 324,000 USD lost, remaining value 756,000 USD",
    "summary": "Given the high allocation to growth stocks and crypto, this portfolio is subject to significant volatility. A mild market correction (10%) could result in a substantial loss, while a severe crash (30%) would lead to a significant erosion of capital. Regular monitoring and a long-term view are crucial to navigate these risks.",
    "quickchart_url": "https://quickchart.io/chart?c={type:'bar',data:{labels:['Mild Crash (10%)','Moderate Crash (20%)','Severe Crash (30%)'],datasets:[{label:'Portfolio Value After Crash',data:[972000,864000,756000]}]}}"
  },
  "education_tips": {
    "diversification_importance": "While this portfolio has some diversification across asset classes, the heavy concentration in technology stocks means a downturn in this sector could disproportionately impact overall returns. Consider diversifying further into different industries or geographies as your comfort with risk evolves.",
    "long_term_perspective": "High-growth investments often experience significant short-term fluctuations. Maintaining a long-term perspective (3+ years) allows your investments to recover from downturns and realize their growth potential. Avoid making emotional decisions based on short-term market movements.",
    "rebalancing_strategy": "Due to the dynamic nature of your allocations, especially with crypto and high-growth stocks, regular rebalancing (e.g., annually or semi-annually) is crucial. This involves selling assets that have performed well and reallocating to underperforming ones to maintain your desired risk profile and asset allocation.",
    "understanding_risk": "Your high-risk appetite is well-reflected in this portfolio. It's important to fully understand that with higher potential returns comes higher risk of capital loss. Continuously educate yourself on market dynamics, the specific risks associated with each asset in your portfolio, and how global economic events can impact your investments."
  }
}
  </script>

  <script>
    const data = JSON.parse(document.getElementById('portfolio-data').textContent.trim());

    // Summary
    document.getElementById('summaryText').textContent = data.summary;

    // Allocation
    const alloc = data.allocation;
    const allocEl = document.getElementById('allocationList');
    allocEl.innerHTML = `
      <div><strong>Stocks:</strong> ${alloc.equity_sleeves.stocks}</div>
      <div><strong>Mutual Funds:</strong> ${alloc.equity_sleeves.mutual_funds}</div>
      <div><strong>Crypto:</strong> ${alloc.diversifiers.crypto || '0%'}</div>
      <div><strong>Bond MF:</strong> ${alloc.diversifiers.bond_mutual_funds}</div>
      <div><strong>Gold:</strong> ${alloc.diversifiers.gold}</div>
    `;

    // Allocation chart
    document.getElementById('allocationChart').src = data.chart_url_allocation;

    // Risk analysis
    document.getElementById('riskSummary').textContent = data.risk_analysis.summary;
    document.getElementById('riskChart').src = data.risk_analysis.quickchart_url;
    // whatIfChart
    document.getElementById('whatIfChart').src = data.what_if_analysis.quickchart_url;
    
    // Education tips
    const tipsEl = document.getElementById('educationTips');
    tipsEl.innerHTML = '';
    for (const tip of Object.values(data.education_tips)) {
      const li = document.createElement('li');
      li.textContent = tip;
      tipsEl.appendChild(li);
    }

    // Stocks grid
    const stocksGrid = document.getElementById('stocksGrid');
    stocksGrid.innerHTML = '';
    (data.stocks_selected || []).forEach(s => {
      const card = document.createElement('div');
      card.className = 'p-4 card';
      card.innerHTML = `
        <div class="flex items-start justify-between">
          <div>
            <h3 class="text-md font-semibold">${s.stock}</h3>
            <div class="muted text-sm">Price: ${s.current_price}</div>
            <div class="muted text-sm">PE: ${s.pe} • PB: ${s.pb}</div>
          </div>
          <div class="text-right">
            <a href="${s.buy_link || '#'}" target="_blank" class="text-sm underline">Buy</a>
          </div>
        </div>
        <p class="mt-2 text-sm muted">${s.analysis_summary?.['reason_for_selection(2-3 lines)'] || ''}</p>
        <div class="mt-3">
          <img src="${s.chart}" alt="${s.stock} chart" class="chart-img" />
        </div>
        <div class="mt-3 text-sm muted grid grid-cols-2 gap-2">
          <div><strong>52w High:</strong> ${s.week_52_high || 'N/A'}</div>
          <div><strong>52w Low:</strong> ${s.week_52_low || 'N/A'}</div>
          <div><strong>Dividend:</strong> ${s.dividend_yield || 'N/A'}</div>
          <div><strong>Debt/Equity:</strong> ${s.total_debt_to_equity || 'N/A'}</div>
        </div>
      `;
      stocksGrid.appendChild(card);
    });

    // What-if analysis
    const whatIf = data.what_if_analysis;
    document.getElementById('whatIfText').innerHTML = `
      <div class="text-sm muted"><strong>Conservative:</strong> ${whatIf.conservative_return || ''}</div>
      <div class="text-sm muted"><strong>Moderate:</strong> ${whatIf.moderate_return || ''}</div>
      <div class="text-sm muted"><strong>Optimistic:</strong> ${whatIf.optimistic_return || ''}</div>
    `;
    // Extract first chart URL from conservative_return for display
    const whatIfChartUrl = (whatIf.quickchart_url)
    document.getElementById('whatIfChart').src = whatIfChartUrl || '';

    // Mutual funds
    const mfList = document.getElementById('mfList');
    mfList.innerHTML = '';
    (data.mutual_funds_selected || []).forEach(m => {
      const el = document.createElement('div');
      el.className = 'p-3 border-card rounded';
      el.innerHTML = `
        <div class="text-sm font-medium">${m.name}</div>
        <div class="muted text-xs">${m.category} • 3y: ${m['3_year_return']} • 5y: ${m['5_year_return']}</div>
        <div class="mt-2 text-sm muted">${m.reason_for_investment}</div>
      `;
      mfList.appendChild(el);
    });
  </script>
</body>
</html>
